<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>


    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>



 





    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            微信小程序学习笔记 | 
        
        Dev.liang&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/avatar.jpeg">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="自从2017年1月9日，张小龙在 2017 微信公开课 Pro 上发布的小程序正式上线以来"/>
    <meta name="keywords" content="Android,Fragment,Java,Shadowsocks,翻墙,hexo,Google,VPN,理财,P2P,荷包,视频推荐,video,设计模式,面试,Fragment,Fragment 生命周期,微信小程序"/>
    <meta name="theme-color" content="#0097A7"/>

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?aE/Bb7RXvDHoOY6SKxbobg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Dev.liang&#39;s Blog">
    <meta name="msapplication-starturl" content="https://leaderliang.coding.me/2da4.html">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Dev.liang&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">


    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://leaderliang.coding.me/2da4.html">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="微信小程序学习笔记 | Dev.liang&#39;s Blog">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="自从2017年1月9日，张小龙在 2017 微信公开课 Pro 上发布的小程序正式上线以来">
    <meta property="og:article:tag" content="微信小程序"> 

    
        <meta property="article:published_time" content="Thu Jun 08 2017 00:10:58 GMT+0800">
        <meta property="article:modified_time" content="Tue Jun 30 2020 14:19:32 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://leaderliang.coding.me/2da4.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://leaderliang.coding.me/2da4.html",
    "headline": "微信小程序学习笔记",
    "datePublished": "Thu Jun 08 2017 00:10:58 GMT+0800",
    "dateModified": "Tue Jun 30 2020 14:19:32 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "dev.liang",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.jpeg"
        },
        "description": "Hi, Nice to meet u!"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Dev.liang&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",微信小程序Android,Fragment,Java,Shadowsocks,翻墙,hexo,Google,VPN,理财,P2P,荷包,视频推荐,video,设计模式,面试,Fragment,Fragment 生命周期",
    "description": "自从2017年1月9日，张小龙在 2017 微信公开课 Pro 上发布的小程序正式上线以来",
}
</script>


    

    <!-- Analytics -->
    
    
    


    <!-- Bing Background 动态变换图片-->
    
        <script type="text/javascript">
            queue.offer(function(){
                $('body').attr('data-original', 'https://api.i-meto.com/bing?color= :black, blue, brown, green, multi, orange, pink, purple, red, white, yellow type= :C,N,S,T,A');
                $('body.lazy').lazyload();
            });
        </script>
    

    <!-- Custom Head -->
    

    <!-- hight light 代码高亮 -->
    <link rel="stylesheet" href="/css/highlight/solarized-white.css" type="text/css">

    <!-- 百度要验证的网站，HTML 标签验证 ，其中一种方式-->
    <!-- baidu 站长工具验证代码 -->
    <meta name="baidu-site-verification" content="W3v1HR1PT5" />
    <!-- google 站长工具验证代码 -->
    <meta name="google-site-verification" content="xkVTQEMiu9jq9ifY_Lg9DNuXJYnRfq1MVVAeLVna6S4" />
    
    <!-- fancybox support 应用 主题下 css js 文件-->
    
        <!-- for theme: default is false -->
        <!-- for page: default is true -->
        <script>lsloader.load("fancybox_js","/js/fancybox/jquery.fancybox.min.js?1glzq05Z/hboRWID7DvJ1w==", true)</script>
        <script>lsloader.load("wrap_image_js","/js/wrapImage.js?KyGdrdh3jqfQLRvTgMf4Iw==", true)</script>
        <style id="fancybox_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("fancybox_css","/js/fancybox/jquery.fancybox.min.css?otQlhCkvZMWCfotnsbOHJg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小程序的一些特点"><span class="post-toc-number">1.</span> <span class="post-toc-text">小程序的一些特点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#没有小程序账号的一些限制"><span class="post-toc-number">2.</span> <span class="post-toc-text">没有小程序账号的一些限制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#学习细节记录，关于调试"><span class="post-toc-number">3.</span> <span class="post-toc-text">学习细节记录，关于调试</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写第一个小程序"><span class="post-toc-number">4.</span> <span class="post-toc-text">编写第一个小程序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#page-标签"><span class="post-toc-number">5.</span> <span class="post-toc-text">page 标签</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#关于小程序设计效果图："><span class="post-toc-number">6.</span> <span class="post-toc-text">关于小程序设计效果图：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#小程序实战"><span class="post-toc-number"></span> <span class="post-toc-text">小程序实战</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Swiper-组件使用"><span class="post-toc-number">1.</span> <span class="post-toc-text">Swiper 组件使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#js-文件结构，和-page-页面的声明周期"><span class="post-toc-number">2.</span> <span class="post-toc-text">js 文件结构，和 page 页面的声明周期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#弹性模型"><span class="post-toc-number">3.</span> <span class="post-toc-text">弹性模型</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据绑定"><span class="post-toc-number">4.</span> <span class="post-toc-text">数据绑定</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#数据绑定扩展"><span class="post-toc-number">5.</span> <span class="post-toc-text">数据绑定扩展</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#列表渲染-wx-for-for循环"><span class="post-toc-number">6.</span> <span class="post-toc-text">列表渲染 wx-for(for循环)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小程序的事件机制"><span class="post-toc-number">7.</span> <span class="post-toc-text">小程序的事件机制</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#template-的使用"><span class="post-toc-number">8.</span> <span class="post-toc-text">template 的使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#组件自定义属性-及-获取属性"><span class="post-toc-number">9.</span> <span class="post-toc-text">组件自定义属性 及 获取属性</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#bug-专栏"><span class="post-toc-number">10.</span> <span class="post-toc-text">bug 专栏</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#属性解释"><span class="post-toc-number">11.</span> <span class="post-toc-text">属性解释</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#z-index"><span class="post-toc-number">11.1.</span> <span class="post-toc-text">z-index</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#font-weight-字体的粗细"><span class="post-toc-number">11.2.</span> <span class="post-toc-text">font-weight 字体的粗细</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#切换图片的两种方式"><span class="post-toc-number">12.</span> <span class="post-toc-text">切换图片的两种方式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#应用程序的生命周期"><span class="post-toc-number">13.</span> <span class="post-toc-text">应用程序的生命周期</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#tab-选项卡"><span class="post-toc-number">14.</span> <span class="post-toc-text">tab 选项卡</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#在小程序中快速创建文件和文件夹的方式"><span class="post-toc-number">15.</span> <span class="post-toc-text">在小程序中快速创建文件和文件夹的方式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#小程序调用服务器数据"><span class="post-toc-number">16.</span> <span class="post-toc-text">小程序调用服务器数据</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#以下是官方的一些-Bug-amp-Tip："><span class="post-toc-number">16.0.1.</span> <span class="post-toc-text">以下是官方的一些 Bug &amp; Tip：</span></a></li></ol></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 22 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                微信小程序学习笔记
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpeg" width="44px" height="44px" alt="Author Avatar"/>
    </div>

    <!-- Author Name & Date -->
    <div>
        <strong>dev.liang</strong>
        <!-- <span>00:10 6月 08, 2017</span> -->
        <span>6月 08, 2017</span>        
    </div>

    <!-- 阅读时长，字数统计 在 scaffolds 目录 page.md 文件中设置了 wordcount 字段，目前为 false，因为样式有点问题
     if (page.wordcount !== false)   
     但还是会显示 ？？？？？
    -->
     
    

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAAB6UlEQVR42u3aQXLDIAwFUN//0u22M2noF5CkRo9Vxm2A54WCJK6vI8aFgYGBgYGBgfFvGFc8fpnoyV9/Pnn8/PituT1gYGB0Y/wR2oKNjp+M55zcAwYGRkvGOCDmWxzj8/nHVAwMDIycER3jxhvCwMDAeBkjWixISjEwMDD2JrHj0ttKGe6tuTgGBsYNGXlR/nWf39rfwMDAuBWjfMUhbm0mKevH7oxgYGDcipEHvoSUHApX5sHAwOjJ2BUEV8DVII6BgdGTsXfhpKyfl9WWTrgYGBhHMKqXtwoBMbiWka+LgYHRmTFXIKuG3bmG5VISi4GBcRBjvWFZWLgILiSxGBgYRzPyY9x6QW1uxfLvBgYGxqGM9QNiMkM1xJeTWAwMjEMZuw58eTBdb4hiYGD0ZFSXLITFqRG9YgwMjGaMKiwv7if/P9dCwMDA6MmYOybmlyqS8Lo5icXAwDiUsX6RK3lB+dHw6fwYGBhtGNUxl4jmx75CExQDA6MNo7qtJFnNr2XMzYCBgdGTUS2cjbe40p7Mn2NgYPRk5K3E6nEwSYA3NwYwMDAwikX8/BpH4UVgYGBgxK3N/PLEevEOAwMDI0li82sZ1QZAUozDwMDozJhrSa6krNWXhYGB0Zlx34GBgYGBgYGB8dHxDQ6xEe6wyG6OAAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/" rel="tag">微信小程序</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/2da4.html" class="leancloud-views_num" data-flag-title="微信小程序学习笔记">
     &nbsp;次阅读
</span>

            </li>
        </a>
    

    <!-- busuanzi_value_page_pv busuanzi 页面访问记录-->
    <!-- 
         -->
             <!-- Busuanzi Views -->

            <!-- <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
      -->

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="https://service.weibo.com/share/share.php?appkey=&title=微信小程序学习笔记&url=https://leaderliang.coding.me/2da4.html&pic=https://leaderliang.coding.me/img/avatar.jpeg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到 微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=微信小程序学习笔记&url=https://leaderliang.coding.me/2da4.html&via=dev.liang" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://leaderliang.coding.me/2da4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://leaderliang.coding.me/2da4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://leaderliang.coding.me/2da4.html&title=微信小程序学习笔记" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="https://connect.qq.com/widget/shareqq/index.html?site=Dev.liang&#39;s Blog&title=微信小程序学习笔记&summary=Dev.liang&#39;s Blog - Android 技术分享、生活记录&pics=https://leaderliang.coding.me/img/avatar.jpeg&url=https://leaderliang.coding.me/2da4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
        <a class="post_share-link" href="https://telegram.me/share/url?url=https://leaderliang.coding.me/2da4.html&text=微信小程序学习笔记" target="_blank">
            <li class="mdl-menu__item">
                分享到 Telegram
            </li>
        </a>
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>自从2017年1月9日，张小龙在 2017 微信公开课 Pro 上发布的小程序正式上线以来<a id="more"></a>，小程序一直都是一个很火的话题，谁都不敢肯定的说小程序可以成为一种趋势，影响原生 APP 的市场，但小程序确实有很多自身独有的特点和优势。</p>
<p>最近因公司的一个小程序开发比赛，燃气了我学习小程序得热情，网上的资料也不多，学习的话也只能查阅官方提供的文档，所以想在这里记录下自己学习过程中的重点和一些开发技巧，笔记写的比较零碎，因之前没有好好学习过 JS，所以以下笔记有些理解是按照移动开发思想来写的，后期有时间会好好整理下，笔记会随着学习持续更新的，相关代码可以在我的 <a href="https://github.com/leaderliang/WeChatProjects" target="_blank" rel="noopener">GitHub</a> 上查看。</p>
<h3 id="小程序的一些特点"><a href="#小程序的一些特点" class="headerlink" title="小程序的一些特点"></a>小程序的一些特点</h3><blockquote>
<p>小程序目前处于公测状态，个人开发者想获取到微信开发者账号，目前还是比较困难。</p>
</blockquote>
<blockquote>
<p>小程序适合做简单的、用完即走的应用。</p>
</blockquote>
<blockquote>
<p>小程序适合低频的应用。</p>
</blockquote>
<blockquote>
<p>小程序适合性能要求不高的应用。</p>
</blockquote>
<blockquote>
<p>小程序不支持加载 WebView。</p>
</blockquote>
<h3 id="没有小程序账号的一些限制"><a href="#没有小程序账号的一些限制" class="headerlink" title="没有小程序账号的一些限制"></a>没有小程序账号的一些限制</h3><blockquote>
<p>不能上传和发布</p>
</blockquote>
<blockquote>
<p>不能真机运行，只可以在 PC的模拟器中运行</p>
</blockquote>
<blockquote>
<p>录音、网络状态、罗盘、拨打电话等功能 无法使用</p>
</blockquote>
<blockquote>
<p>获取用户信息的流程是模拟的而不是真实的</p>
</blockquote>
<p>目前小程序的这些限制，但是不影响我们学习小程序开发。</p>
<h3 id="学习细节记录，关于调试"><a href="#学习细节记录，关于调试" class="headerlink" title="学习细节记录，关于调试"></a>学习细节记录，关于调试</h3><p>扫一扫后，点击小程序本地项目</p>
<p>调试界面会有以 .js 和 .js[sm] 后缀结尾的文件，调试的话 要在 带有 .js[sm] 后缀的文件中打断点。</p>
<h3 id="编写第一个小程序"><a href="#编写第一个小程序" class="headerlink" title="编写第一个小程序"></a>编写第一个小程序</h3><blockquote>
<p>.js javascript 文件</p>
</blockquote>
<blockquote>
<p>.json 是系统或者页面的配置文件，配置文件中不能添加注释，否则编译时候报错。</p>
</blockquote>
<blockquote>
<p>.wxml 是编写小程序的骨架文件，可以理解为 HTML 文件</p>
</blockquote>
<blockquote>
<p>.wxss 样式文件</p>
</blockquote>
<p>在工程下，以 app 开头的文件属于全局配置或者样式文件。&lt;view&gt; 和 &lt;div&gt; 标签 的作用相当；只有写在 text 标签里包括的文字，才可以在手机里实现长按选中复制操作</p>
<p>分辨率：物理分辨率，逻辑分辨率。</p>
<h3 id="page-标签"><a href="#page-标签" class="headerlink" title="page 标签"></a>page 标签</h3><p>可在 page 里面设置背景色，以及在状态栏里通过 windows 标签设置小程序的状态栏、导航条、标题、窗口背景色。<br>page 标签，在样式表里书写时候不能写成 .page。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">page&#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  background-color: #b3d4db;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="关于小程序设计效果图："><a href="#关于小程序设计效果图：" class="headerlink" title="关于小程序设计效果图："></a>关于小程序设计效果图：</h3><p>以 iphone6 的 750 个像素的宽度做效果图，假如 一个图片的像素是 200 个像素，则在小程序里 直接就写 200rpx，他们的转换关系是 1 ：1 的。</p>
<p>在开发过程中，水平布局的样式推荐使用 rpx 为单位，横向如果元素单一视情况也可使用 px为单位，纵向布局的间距推荐 px。</p>
<h2 id="小程序实战"><a href="#小程序实战" class="headerlink" title="小程序实战"></a>小程序实战</h2><h3 id="Swiper-组件使用"><a href="#Swiper-组件使用" class="headerlink" title="Swiper 组件使用"></a>Swiper 组件使用</h3><p>基础属性大家可以在官方文档中查找并使用，<br>swiper 里有个特别的属性需要提一下 vertical=”true” 纵向滚动，使图片可以纵向滚动。</p>
<h3 id="js-文件结构，和-page-页面的声明周期"><a href="#js-文件结构，和-page-页面的声明周期" class="headerlink" title="js 文件结构，和 page 页面的声明周期"></a>js 文件结构，和 page 页面的声明周期</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    // 设置数据绑定，定义数据变量</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面加载</span><br><span class="line">   */</span><br><span class="line">  onLoad: function (options) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面初次渲染完成</span><br><span class="line">   */</span><br><span class="line">  onReady: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面显示</span><br><span class="line">   */</span><br><span class="line">  onShow: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面隐藏</span><br><span class="line">   */</span><br><span class="line">  onHide: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面卸载</span><br><span class="line">   */</span><br><span class="line">  onUnload: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面相关事件处理函数--监听用户下拉动作</span><br><span class="line">   */</span><br><span class="line">  onPullDownRefresh: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面上拉触底事件的处理函数</span><br><span class="line">   */</span><br><span class="line">  onReachBottom: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 用户点击右上角分享</span><br><span class="line">   */</span><br><span class="line">  onShareAppMessage: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="弹性模型"><a href="#弹性模型" class="headerlink" title="弹性模型"></a>弹性模型</h3><pre><code>/**需要先声明是弹性模型*/
display: flex;
/**设置弹性模型的方向*/
flex-direction:column;</code></pre><h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><p>如果绑定的数据是在标签的属性上，需要添加添加双引号 “&#123;&#123; &#125;&#125;”<br>如果绑定的数据是在标签的属性上，需要添加添加双引号 “&#123;&#123; &#125;&#125;”</p>
<p>如果绑定的数据在标签之间，则不需要添加 “”, eg:&lt;text&gt;&#123;&#123; &#125;&#125;&lt;/text&gt;</p>
<h3 id="数据绑定扩展"><a href="#数据绑定扩展" class="headerlink" title="数据绑定扩展"></a>数据绑定扩展</h3><p>所有属性值是 boolean 的时候，如果有需要设置为 false 的时候，都需要写成 false 才可生效。因为如果写成 false ，小程序会默认为是有值的，从而编译为 true。</p>
<p>两个花括号结合起来的数据绑定也是可以生效的<br>&lt;text&gt;&#123;&#123;data1&#125;&#125;&#123;&#123;data2&#125;&#125;&lt;/text&gt;</p>
<p>用 wx:if=”&#123;&#123;&#125;&#125;” 来控制 image 的显示和隐藏<br>&lt;image&gt; wx:if=”&#123;&#123;img_visible&#125;&#125;”&gt;&lt;/image&gt;</p>
<h3 id="列表渲染-wx-for-for循环"><a href="#列表渲染-wx-for-for循环" class="headerlink" title="列表渲染 wx-for(for循环)"></a>列表渲染 wx-for(for循环)</h3><p>for 循环的布局样式都需要写在 &lt;block/&gt; 中，大家可以把<br>&lt;block/&gt; 标签理解为一个大括号 {}。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- </span><br><span class="line">    item 可以理解为条目数据的对象</span><br><span class="line">    index 可以理解为 索引</span><br><span class="line">    且 item 和 index 两个值都是 &lt;block/&gt; 标签中引用时候的默认值，可直接打 . 来调用 </span><br><span class="line">    wx:for-item=&quot;item&quot; wx:for-index=&quot;index&quot; 这两个标签都可以不用再 &lt;block/&gt;标签中声明，直接使用 item index 打 . 调用即可。</span><br><span class="line"> --&gt;</span><br><span class="line"> </span><br><span class="line">&lt;block wx:for=&quot;&#123;&#123;数据源或者放置数据源的 key&#125;&#125;&quot; </span><br><span class="line">       wx:for-item=&quot;item&quot; </span><br><span class="line">       wx:for-index=&quot;index&quot;&gt;</span><br><span class="line">	&lt;image src=&quot;&#123;&#123;item.leaderliang.png&#125;&#125;&quot;&gt;&lt;/image&gt;</span><br><span class="line">	&lt;text&gt;&#123;&#123;item.title&#125;&#125;&#123;&#123;index&#125;&#125;&lt;/text&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>

<p>在使用 wx:for 的时候，会报一个警告；类似于这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./pages/post/post.wxml</span><br><span class="line">Now you can provide attr &quot;wx:key&quot; for a &quot;wx:for&quot; to improve performance.</span><br><span class="line">   |   &lt;/swiper&gt;</span><br><span class="line">   | </span><br><span class="line">&gt;  |   &lt;block wx:for=&quot;&#123;&#123;posts_key&#125;&#125;&quot; wx:for-item=&quot;item&quot; wx:for-index=&quot;index&quot;&gt;</span><br><span class="line">   |    ^</span><br><span class="line">   |   &lt;view catchtap=&quot;onPostItemTap&quot;&gt;</span><br><span class="line">   |       &lt;!-- is = 的是模板的名字--&gt;</span><br><span class="line">   |   &lt;template is=&quot;postItem&quot; data=&quot;&#123;&#123;...item&#125;&#125;&quot; /&gt;</span><br></pre></td></tr></table></figure>
<p>官方给的解释是这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">这个不是bug，是一个关于性能优化方面的提示</span><br><span class="line"></span><br><span class="line">具体参见 wx:key</span><br><span class="line">如果列表中项目的位置会动态改变或者有新的项目添加到列表中，并且希望列表中的项目保持自己的特征和状态（如 &lt;input/&gt;中的输入内容，&lt;switch/&gt; 的选中状态），需要使用 wx:key 来指定列表中项目的唯一的标识符。</span><br><span class="line"></span><br><span class="line">wx:key 的值以两种形式提供</span><br><span class="line"></span><br><span class="line">字符串，代表在 for 循环的 array 中 item 的某个 property，该 property 的值需要是列表中唯一的字符串或数字，且不能动态改变。</span><br><span class="line">保留关键字 *this 代表在 for 循环中的 item 本身，这种表示需要 item 本身是一个唯一的字符串或者数字，如：</span><br><span class="line">当数据改变触发渲染层重新渲染的时候，会校正带有 key 的组件，框架会确保他们被重新排序，而不是重新创建，以确保使组件保持自身的状态，并且提高列表渲染时的效率。</span><br><span class="line"></span><br><span class="line">如不提供 wx:key，会报一个 warning， 如果明确知道该列表是静态，或者不必关注其顺序，可以选择忽略。</span><br></pre></td></tr></table></figure>
<p>个人尝试了下 设置 wx:key=””，暂且可以消除警告，不知道后期会不会有其他问题，随后会再研究一下。</p>
<h3 id="小程序的事件机制"><a href="#小程序的事件机制" class="headerlink" title="小程序的事件机制"></a>小程序的事件机制</h3><p>bindtap=”方法名”<br>view 的事件监听，但是会有冒泡的情况发生</p>
<p>catchtap=”方法名”<br>可以阻止冒泡的执行 </p>
<h3 id="template-的使用"><a href="#template-的使用" class="headerlink" title="template 的使用"></a>template 的使用</h3><p>目前 template 只支持 复用标签和样式，还不支持 js</p>
<p>在创建 template 后， .wxml 中会把公共的 view 布局放置进去，数据绑定的参数 item.title/date/avatar 等等属性  可以直接把 item 去掉，但是需要配合在相应 依赖的 .wxml 中把之前 设置的数据绑定处 data 的值前加 “…”,三个点，加了三个点之后，相当于把这个对象平铺了。如 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;block wx:for=&quot;&#123;&#123;posts_key&#125;&#125;&quot; wx:for-item=&quot;item&quot; wx:for-index=&quot;index&quot;&gt;</span><br><span class="line">&lt;!-- is = 的是模板的名字--&gt;</span><br><span class="line">  &lt;template is=&quot;postItem&quot; data=&quot;&#123;&#123;...item&#125;&#125;&quot; /&gt;</span><br><span class="line">&lt;/block&gt;</span><br></pre></td></tr></table></figure>
<p>另外在使用 template 模板的时候，需要注意，当模板里面有用到图片的地方，路径切忌不能是相对路径，要写为绝对路径，因为毕竟是模板文件，会有很多界面使用到，层级什么的会有不一样，为了避免后期不必要的 bug，建议统一使用绝对路径！</p>
<h3 id="组件自定义属性-及-获取属性"><a href="#组件自定义属性-及-获取属性" class="headerlink" title="组件自定义属性 及 获取属性"></a>组件自定义属性 及 获取属性</h3><p>在一个 view 标签里添加 catchtap 点击事件后，可以在 view 标签里添加自定义数据，通过事件传递数据。</p>
<p>如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;view catchtap=&quot;onPostItemTap&quot; data-postItemId=&quot;&#123;&#123;item.postId&#125;&#125;&quot;&gt;</span><br><span class="line">  ......</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<p>在 js 文件中接收 data 数据，示例代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onPostItemTap: function(event)&#123;</span><br><span class="line">  var postId = event.currentTarget.dataset.postitemid;</span><br><span class="line">  var postId = event.currentTarget.dataset.dataId;</span><br><span class="line">  console.log(&quot;postId=&quot; + postId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>event.currentTarget.dataset.dataId;</p>
<p>event 框架提供的事件对象</p>
<p>currentTarget 当前点击的组件，对应的就是上面的 view </p>
<blockquote>
<p>currentTarget 和 target 区别<br>target 指的是当前点击的组件<br>currentTarget 指的是事件最终捕获的组件</p>
</blockquote>
<p>dataset 所有自定义数据的集合，可以在这个集合下面寻找我们定义的数据</p>
<p>currentTarget、dataset 都是 Object 的。</p>
<p>另外在 view 标签里面定义的 data-postItemId 数据，在 onPostItemTap 事件中接收的时候 postItemId 中的连接符 和 大写的字母 都会被去掉和转换成小写，所以接收的时候，需要多注意一下。</p>
<h3 id="bug-专栏"><a href="#bug-专栏" class="headerlink" title="bug 专栏"></a>bug 专栏</h3><p>另外在这里记录一下在编写小程序时候报的一些 bug：</p>
<p>在创建新的界面时候我们或许会把 .js、.json、.wxml、.wxss 这四个文件都给创建，但是在页面跳转的过程中，假如新创建的界面里面只有一个文本，或者没有样式和配置的时候，就会报下面这些错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">navigateTo:fail url &quot;pages/post/post-detail/post-detail&quot; is not in app.json</span><br><span class="line">遇到类似于这样的就你的 系统配置文件 app.json 中没有配置 对应新创建的页面，配置一下路径就好啦。</span><br></pre></td></tr></table></figure>
<p>再比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pages/post/post-detail/post-detail.json</span><br><span class="line">未找到入口 pages/post/post-detail/post-detail.json 文件，或者文件读取失败，请检查后重新编译。</span><br><span class="line">遇到这样的就是因为新创建的页面的 .json 文件是空的，如果没有配置需要配置，可以在文件中写入 “&#123;&#125;”，一个大括号，就搞定啦</span><br></pre></td></tr></table></figure>
<p>再或者：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pages/post/post-detail/post-detail 出现脚本错误或者未正确调用 Page()</span><br><span class="line">遇到这样的，就是因为新创建的页面的 .js 文件 中需要配置一下 page 方法。</span><br></pre></td></tr></table></figure>
<p>以上都是比较基础的问题，仔细看下报错日志，多试一下，再不行的话可以在官方的<a href="https://developers.weixin.qq.com/home?" target="_blank" rel="noopener">开发者社区</a>搜一下相关问题，或者发起提问，基本都可以解决的。</p>
<h3 id="属性解释"><a href="#属性解释" class="headerlink" title="属性解释"></a>属性解释</h3><h4 id="z-index"><a href="#z-index" class="headerlink" title="z-index"></a>z-index</h4><p>z-index 属性设置元素的堆叠顺序。拥有更高堆叠顺序的元素总是会处于堆叠顺序较低的元素的前面。<br>注释：元素可拥有负的 z-index 属性值。<br>注释：Z-index 仅能在定位元素上奏效（例如 position:absolute;）！<br>说明：该属性设置一个定位元素沿 z 轴的位置，z 轴定义为垂直延伸到显示区的轴。如果为正数，则离用户更近，为负数则表示离用户更远</p>
<h4 id="font-weight-字体的粗细"><a href="#font-weight-字体的粗细" class="headerlink" title="font-weight 字体的粗细"></a>font-weight 字体的粗细</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">font-weight:normal;</span><br><span class="line">font-weight:bold;</span><br><span class="line">font-weight:900;</span><br></pre></td></tr></table></figure>


<h3 id="切换图片的两种方式"><a href="#切换图片的两种方式" class="headerlink" title="切换图片的两种方式"></a>切换图片的两种方式</h3><p>可通过 if else 来进行设置</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;image wx:if=&quot;&#123;&#123;checked&#125;&#125;&quot; catchtap=&quot;onCheckTap&quot;  src=&quot;/images/icon/check.png&quot;/&gt;</span><br><span class="line">&lt;image wx:else catchtap=&quot;onCheckTap&quot; src=&quot;/images/icon/un_check.png&quot;/&gt;</span><br></pre></td></tr></table></figure>

<p>通过数据绑定的形式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;image class=&quot;audio&quot; catchtap=&quot;onAudioTap&quot; </span><br><span class="line">       src=&quot;&#123;&#123;isPlayingMusic ? &apos;/images/music/music-stop.png&apos; : &apos;/images/music/music-start.png&apos;&#125;&#125;&quot;&gt;</span><br><span class="line">&lt;/image&gt;</span><br></pre></td></tr></table></figure>

<h3 id="应用程序的生命周期"><a href="#应用程序的生命周期" class="headerlink" title="应用程序的生命周期"></a>应用程序的生命周期</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">以下代码需要在工程根目录下的 app.js 中进行编写，目前小程序应用程序的生命周期有四个方法</span><br><span class="line"></span><br><span class="line">App(&#123;</span><br><span class="line">   </span><br><span class="line">   gloableData:&#123;</span><br><span class="line">        // 音乐是否在播放</span><br><span class="line">        g_isPlayingMusic: false,</span><br><span class="line">        // 哪一个音乐在播放</span><br><span class="line">        g_currentMusicPostId: null</span><br><span class="line">   &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序初始化完成时，会触发 onLaunch（全局只触发一次）</span><br><span class="line">   */</span><br><span class="line">  onLaunch: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序启动，或从后台进入前台显示，会触发 onShow</span><br><span class="line">   */</span><br><span class="line">  onShow: function (options) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序从前台进入后台，会触发 onHide</span><br><span class="line">   */</span><br><span class="line">  onHide: function () &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 当小程序发生脚本错误，或者 api 调用失败时，会触发 onError 并带上错误信息</span><br><span class="line">   */</span><br><span class="line">  onError: function (msg) &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>如果我们的某个界面需要用到小程序 app.js 中的相关功能或函数，则需在相应的界面中声明一个 app 变量</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 获取小程序实例</span><br><span class="line">var app = getApp();</span><br></pre></td></tr></table></figure>

<p>进而即可通过 app 变量  来调用 app.js 中对象的属性</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.gloableData.g_isPlayingMusic = true;</span><br><span class="line">// 音乐播放，设置存储对应播放的 postId</span><br><span class="line">app.gloableData.g_currentMusicPostId = that.data.currentPostId;</span><br></pre></td></tr></table></figure>


<h3 id="tab-选项卡"><a href="#tab-选项卡" class="headerlink" title="tab 选项卡"></a>tab 选项卡</h3><p>tabBar<br>如果我们的小程序是一个多 tab 应用（客户端窗口的底部或顶部有 tab 栏可以切换页面），那么我们可以通过 tabBar 配置项指定 tab 栏的表现，以及 tab 切换时显示的对应页面。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">在 app.json 文件中进行配置 tab</span><br><span class="line">&#123;</span><br><span class="line">  &quot;tabBar&quot;: &#123;</span><br><span class="line">    &quot;borderStyle&quot;: &quot;white&quot;,</span><br><span class="line">    &quot;position&quot;: &quot;top&quot;,</span><br><span class="line">    &quot;selectedColor&quot;: &quot;#000000&quot;,</span><br><span class="line">    &quot;list&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/post/post&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;文章&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;images/tab/yuedu.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;/images/tab/yuedu_hl.png&quot;,</span><br><span class="line">        &quot;backgroundColor&quot;: &quot;#000000&quot;,</span><br><span class="line">        &quot;selectedColor&quot;: &quot;#000000&quot;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;pagePath&quot;: &quot;pages/movies/movies&quot;,</span><br><span class="line">        &quot;text&quot;: &quot;电影&quot;,</span><br><span class="line">        &quot;iconPath&quot;: &quot;/images/tab/dianying.png&quot;,</span><br><span class="line">        &quot;selectedIconPath&quot;: &quot;images/tab/dianying_hl.png&quot;,</span><br><span class="line">        &quot;backgroundColor&quot;: &quot;#000000&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>tabBar 页面跳转方法   </p>
<blockquote>
<p>wx.switchTab(OBJECT)<br>跳转到 tabBar 页面，并关闭其他所有非 tabBar 页面</p>
</blockquote>
<p>Tip：</p>
<p>需要配置在 list 外边，否则无效</p>
<blockquote>
<p>“borderStyle”: “white”,<br>“position”: “top/bottom”,<br>“selectedColor”: “#000000”,<br>当设置 position 为 top 时，将不会显示 icon<br>tabBar 是一个数组，只能配置最少2个、最多5个 tab，tab 按数组的顺序排序</p>
</blockquote>
<h3 id="在小程序中快速创建文件和文件夹的方式"><a href="#在小程序中快速创建文件和文件夹的方式" class="headerlink" title="在小程序中快速创建文件和文件夹的方式"></a>在小程序中快速创建文件和文件夹的方式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 在 app.json 文件中 pages 配置项下直接编写文件路径，然后 command + s 或 (ctrl + s)</span><br><span class="line"> * ，即可在左侧工程下生成相应的目录和文件；但目前我使用的开发版本号是 0.17.171900</span><br><span class="line"> * ，系统已经支持一次性创建四个文件的功能，直接在你想要的目录下新建目录即可实</span><br><span class="line"> */ </span><br><span class="line">&quot;pages&quot;: [</span><br><span class="line">  &quot;pages/welcome/welcome&quot;,</span><br><span class="line">  &quot;pages/post/post&quot;,</span><br><span class="line">  &quot;pages/movies/movies&quot;,</span><br><span class="line">  &quot;pages/post/post-detail/post-detail&quot;</span><br><span class="line">],</span><br></pre></td></tr></table></figure>


<h3 id="小程序调用服务器数据"><a href="#小程序调用服务器数据" class="headerlink" title="小程序调用服务器数据"></a>小程序调用服务器数据</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">官方示例代码</span><br><span class="line">wx.request(&#123;</span><br><span class="line">  url: &apos;test.php&apos;, //仅为示例，并非真实的接口地址</span><br><span class="line">  data: &#123;</span><br><span class="line">     x: &apos;&apos; ,</span><br><span class="line">     y: &apos;&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  header: &#123;</span><br><span class="line">      &apos;content-type&apos;: &apos;application/json&apos;</span><br><span class="line">  &#125;,</span><br><span class="line">  success: function(res) &#123;</span><br><span class="line">    console.log(res.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">个人实际操作时代码如下</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">onLoad: function (options) &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      url: &apos;https://api.douban.com/v2/movie/top250&apos;,</span><br><span class="line">      data: &#123;&#125;,</span><br><span class="line">      method: &apos;GET&apos;,// 默认为 GET，有效值：OPTIONS, GET, HEAD, POST, PUT, DELETE, TRACE, CONNECT</span><br><span class="line">      header: &#123;</span><br><span class="line">        &apos;content-type&apos;: &apos;application/xml&apos;</span><br><span class="line">      &#125;,</span><br><span class="line">      success: function (res) &#123;</span><br><span class="line">        console.log(res.data)</span><br><span class="line">      &#125;,</span><br><span class="line">      fail: function()&#123;</span><br><span class="line">        console.log(&quot;request fail&quot;)</span><br><span class="line">      &#125;,</span><br><span class="line">      complete: function()&#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>其中填写 header 时，遇到些 bug，在这里总结下：</p>
<p>因为临时用的豆瓣的电影 api，在配置时 header 中按照官方示例填写如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">header: &#123;</span><br><span class="line">    &apos;content-type&apos;: &apos;application/json&apos;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>请求豆瓣服务器返回如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET https://api.douban.com/v2/movie/top250 400 (Bad Request)</span><br><span class="line">Object &#123;msg: &quot;Invalid request&quot;, code: 999, request: &quot;GET /v2/top250&quot;&#125;</span><br><span class="line">code:999</span><br><span class="line">msg:&quot;Invalid request&quot;</span><br><span class="line">request:&quot;GET /v2/top250&quot;</span><br></pre></td></tr></table></figure>
<p>后来尝试把 vaule 修改为空字符串，或者随便的其他字符，后来多次测试发现随便改个值就可以请求成功啦。</p>
<h5 id="以下是官方的一些-Bug-amp-Tip："><a href="#以下是官方的一些-Bug-amp-Tip：" class="headerlink" title="以下是官方的一些 Bug &amp; Tip："></a>以下是官方的一些 Bug &amp; Tip：</h5><blockquote>
<p>content-type 默认为 ‘application/json’<br>开发者工具 0.10.102800 版本，header 的 content-type 设置异常；<br>客户端的 HTTPS TLS 版本为1.2，但 Android 的部分机型还未支持 TLS 1.2，所以请确保 HTTPS 服务器的 TLS 版本支持1.2及以下版本；<br>要注意 method 的 value 必须为大写（例如：GET）；<br>url 中不能有端口；<br>request 的默认超时时间和最大超时时间都是 60s；<br>request 的最大并发数是 5；<br>网络请求的 referer 是不可以设置的，格式固定为 <a href="https://servicewechat.com/{appid}/{version}/page-frame.html" target="_blank" rel="noopener">https://servicewechat.com/{appid}/{version}/page-frame.html</a>  其中 {appid} 为小程序的 appid，{version} 为小程序的版本号，版本号为 0 表示为开发版。</p>
</blockquote>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: 'f001049beca27f93b7ec',
            clientSecret: 'ff35fc6bcf78d776368077ae1f8c5333a13f4bd0',
            repo: 'leaderliang.github.io',
            owner: 'leaderliang',
            admin: ['leaderliang'],
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/ca0a.html" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/e180.html" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpeg" alt="dev.liang's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        dev.liang@outlook.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:dev.liang@outlook.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/01/">一月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">五月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/02/">二月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/android/">Android<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/java/">Java<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/Kotlin/">Kotlin<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/XiaoMi/">XiaoMi<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/customize-view/">自定义 View<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/git/">Git<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/hexo/">Hexo<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/java/">Java<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/react-native/">React Native<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/rxjava/">RxJava<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/tools/">Tools<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/benefit-share/">benefit-share<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/wechat/">微信小程序<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/theory/">理论基础<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/manage-money/">理财<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/video/">视频推荐<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/design-patterns/">设计模式<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/interview/">面试<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="Timeline">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                Timeline
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/leave-a-message" title="给我留言">
                
                    <i class="material-icons sidebar-material-icons">email</i>
                
                给我留言
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="https://github.com/leaderliang" target="_blank" rel="noopener" title="GitHub">
                
                GitHub
            </a>
        </li>
        
    
        <li>
            <a href="/1829.html" title="VPN 翻墙">
                
                VPN 翻墙
            </a>
        </li>
        
    
        <li>
            <a href="" title="最近访客">
                
                最近访客
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">35</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/2653833512" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/leaderliang" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Dev.liang's Blog
            

            <!--  不蒜子 统计访问量 -->
            <div>
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                <div>
                    <!-- 算法a：pv的方式，单个用户连续点击n篇文章，记录n次访问量 -->
                    总阅读次数&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;次&nbsp;
                    <span class="post-meta-divider">|</span>
                    <!-- 算法b：uv的方式，单个用户连续点击n篇文章，只记录1次访客数 -->
                    &nbsp;您是第&nbsp;<span id="busuanzi_value_site_uv"></span>&nbsp;个到来的小伙伴
                </div>
            </div>

 
        </div>

   
        

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <p>
                Hosted by <a href="https://pages.coding.me" target="_blank" rel="noopener" style="font-weight: bold">Coding Pages</a>
            </p>
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    

    <!-- baidu 站长站长配置 自动推送 -->
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
            }
            else {
                bp.src = 'https://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?NO+c6mZDGYWZMpqy5qB3yA==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?x1uB3XKBvDVAt1USvsGG8A==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#DC143C'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #DC143C, 0 0 15px #DC143C'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#DC143C',
        'border-left-color': '#DC143C'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('232tUzVxCgAj7vWMAvwzdX1d-gzGzoHsz', 'uIX1x31R4d6jXqcvcFGUQsE1');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>




    <!-- Busuanzi -->
    <script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://api.i-meto.com/bing?color= :black, blue, brown, green, multi, orange, pink, purple, red, white, yellow type= :C,N,S,T,A');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>

            <!-- Code hight light  代码高亮-->
            <script src="/js/highlight.min.js" type="text/javascript"></script>
            <script type="text/javascript">
                hljs.initHighlightingOnLoad();    
                $(document).ready(function() {
                  $('.code').each(function(i, block) {
                    hljs.highlightBlock(block);
                  });
                });
            </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


        </body>
    
</html>
