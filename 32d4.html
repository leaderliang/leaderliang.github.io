<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.6 -->
    <script>
        window.materialVersion = "1.5.6"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0',
            '1.5.2',
            '1.5.5'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">


    <link rel="dns-prefetch" href="https://cdn1.lncld.net"/>


    <link rel="dns-prefetch" href="https://busuanzi.ibruce.info"/>



 





    <link rel="dns-prefetch" href="https://fonts.googleapis.com"/>





    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            RxJava2.0 学习笔记 - 常见操作符的使用 | 
        
        Dev.liang&#39;s Blog
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/avatar.jpeg">
    <link rel="icon" href="/img/favicon.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="Dev.liang&#39;s Blog - Android 技术分享、生活记录"/>
    <meta name="keywords" content="Android,Fragment,Java,Shadowsocks,翻墙,hexo,Google,VPN,理财,P2P,荷包,视频推荐,video,设计模式,面试,Fragment,Fragment 生命周期,Android,RxJava"/>
    <meta name="theme-color" content="#0097A7"/>

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?aE/Bb7RXvDHoOY6SKxbobg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body {
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="Dev.liang&#39;s Blog">
    <meta name="msapplication-starturl" content="https://leaderliang.coding.me/32d4.html">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="Dev.liang&#39;s Blog">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/favicon.png">


    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://leaderliang.coding.me/32d4.html">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="RxJava2.0 学习笔记 - 常见操作符的使用 | Dev.liang&#39;s Blog">
    <meta property="og:image" content="/img/favicon.png">
    <meta property="og:description" content="Dev.liang&#39;s Blog - Android 技术分享、生活记录">
    <meta property="og:article:tag" content="Android"> <meta property="og:article:tag" content="RxJava"> 

    
        <meta property="article:published_time" content="Wed Dec 20 2017 22:56:58 GMT+0800">
        <meta property="article:modified_time" content="Wed Nov 20 2019 21:22:17 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://leaderliang.coding.me/32d4.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://leaderliang.coding.me/32d4.html",
    "headline": "RxJava2.0 学习笔记 - 常见操作符的使用",
    "datePublished": "Wed Dec 20 2017 22:56:58 GMT+0800",
    "dateModified": "Wed Nov 20 2019 21:22:17 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "dev.liang",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.jpeg"
        },
        "description": "Hi, Nice to meet u!"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Dev.liang&#39;s Blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",Android,RxJavaAndroid,Fragment,Java,Shadowsocks,翻墙,hexo,Google,VPN,理财,P2P,荷包,视频推荐,video,设计模式,面试,Fragment,Fragment 生命周期",
    "description": "Dev.liang&#39;s Blog - Android 技术分享、生活记录",
}
</script>


    

    <!-- Analytics -->
    
    
    


    <!-- Bing Background 动态变换图片-->
    
        <script type="text/javascript">
            queue.offer(function(){
                $('body').attr('data-original', 'https://api.i-meto.com/bing?color= :black, blue, brown, green, multi, orange, pink, purple, red, white, yellow type= :C,N,S,T,A');
                $('body.lazy').lazyload();
            });
        </script>
    

    <!-- Custom Head -->
    

    <!-- hight light 代码高亮 -->
    <link rel="stylesheet" href="/css/highlight/solarized-white.css" type="text/css">

    <!-- 百度要验证的网站，HTML 标签验证 ，其中一种方式-->
    <!-- baidu 站长工具验证代码 -->
    <meta name="baidu-site-verification" content="W3v1HR1PT5" />
    <!-- google 站长工具验证代码 -->
    <meta name="google-site-verification" content="xkVTQEMiu9jq9ifY_Lg9DNuXJYnRfq1MVVAeLVna6S4" />
    
    <!-- fancybox support 应用 主题下 css js 文件-->
    
        <!-- for theme: default is false -->
        <!-- for page: default is true -->
        <script>lsloader.load("fancybox_js","/js/fancybox/jquery.fancybox.min.js?1glzq05Z/hboRWID7DvJ1w==", true)</script>
        <script>lsloader.load("wrap_image_js","/js/wrapImage.js?KyGdrdh3jqfQLRvTgMf4Iw==", true)</script>
        <style id="fancybox_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("fancybox_css","/js/fancybox/jquery.fancybox.min.css?otQlhCkvZMWCfotnsbOHJg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    

    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#RxJava2-0-操作符"><span class="post-toc-number">1.</span> <span class="post-toc-text">RxJava2.0 操作符</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#操作符目录"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">操作符目录</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#map"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">map</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#flatMap"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">flatMap</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#flatMap-在项目中的实践"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">flatMap 在项目中的实践</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#concatMap"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">concatMap</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#zip"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">zip</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#zip-在项目实践"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">zip 在项目实践</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#filter"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">filter</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#sample-操作符"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">sample 操作符</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#说明"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">说明</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 22 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                RxJava2.0 学习笔记 - 常见操作符的使用
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.jpeg" width="44px" height="44px" alt="Author Avatar"/>
    </div>

    <!-- Author Name & Date -->
    <div>
        <strong>dev.liang</strong>
        <!-- <span>22:56 12月 20, 2017</span> -->
        <span>12月 20, 2017</span>        
    </div>

    <!-- 阅读时长，字数统计 在 scaffolds 目录 page.md 文件中设置了 wordcount 字段，目前为 false，因为样式有点问题
     if (page.wordcount !== false)   
     但还是会显示 ？？？？？
    -->
     
    

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    
        <button id="article-functions-qrcode-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">devices other</i>
    <span class="visuallyhidden">devices other</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-qrcode-button">
    <li class="mdl-menu__item">在其它设备中阅读本文章</li>
    
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAAB6UlEQVR42u3aQW7DMAwEQP//0+21QFN3V3Ic2xqdAiORNTkQFMnt6xFrw8DAwMDAwMC4DGOL14uNfjzPP//ec+wMGBgYqzH+CW0B46+/Jtlz7AwYGBhrMvYDYvv6Fy+O99//DgYGBkbLiNK4/QNhYGBgnMLIg+ylAy4GBsblGfmFMz9KW5476S6OgYFxQ0ZelH/f51P7GxgYGLdi1CMOh15ZPzYzgoGBcSvGTPlsf2wiP3o75IGBgbEyI2lAtk/a5K84DwYGxpKMPLAm4bUtqNXfxMDAWJJRl+ZL5Ey6iYGBgZEfdCzsjjUsp+7iGBgYD2IkmDzhy8tqeeCOLrEYGBgLMOYLZPmIRp441gEXAwNjAUbejEyal/kOY0EcAwMDIzliDkgC6AGXWAwMjIcy8vLZYPn+oISynhnBwMB4NCMfgMhTunaANfoVBgbGkow21B4VfJNLLwYGBkZ+iS1eExw3hxWpIQYGxuMY7Zofp5i59GJgYKzJaEtgY8MZOWlw2AIDA2MBRh5kx9LEtvGQPMfAwFiT0bYSxwa/8gB9QGMAAwMDoxz8mk80MTAwMHJGEhxbWHuFxsDAWJMx0wxI2qJtg3Nw2AIDA+OhjJkBiDb4FgW19/U3MDAwbsW478LAwMDAwMDA+Oj6BudIoV7AFtLtAAAAAElFTkSuQmCC">
    
</ul>

    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/android/" rel="tag">Android</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/rxjava/" rel="tag">RxJava</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    
    <!-- Leancloud Views -->
        <a class="post_share-link" href="#">
            <li class="mdl-menu__item">
                <span id="/32d4.html" class="leancloud-views_num" data-flag-title="RxJava2.0 学习笔记 - 常见操作符的使用">
     &nbsp;次阅读
</span>

            </li>
        </a>
    

    <!-- busuanzi_value_page_pv busuanzi 页面访问记录-->
    <!-- 
         -->
             <!-- Busuanzi Views -->

            <!-- <a class="post_share-link" href="#">
                <li class="mdl-menu__item">
                    <span id="busuanzi_container_page_pv">
                        <span id="busuanzi_value_page_pv"></span>&nbsp;浏览量
                    </span>
                </li>
            </a>
        
      -->

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="https://service.weibo.com/share/share.php?appkey=&title=RxJava2.0 学习笔记 - 常见操作符的使用&url=https://leaderliang.coding.me/32d4.html&pic=https://leaderliang.coding.me/img/avatar.jpeg&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到 微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=RxJava2.0 学习笔记 - 常见操作符的使用&url=https://leaderliang.coding.me/32d4.html&via=dev.liang" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://leaderliang.coding.me/32d4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://leaderliang.coding.me/32d4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    
        <a class="post_share-link" href="https://www.linkedin.com/shareArticle?mini=true&url=https://leaderliang.coding.me/32d4.html&title=RxJava2.0 学习笔记 - 常见操作符的使用" target="_blank">
            <li class="mdl-menu__item">
                分享到 LinkedIn
            </li>
        </a>
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="https://connect.qq.com/widget/shareqq/index.html?site=Dev.liang&#39;s Blog&title=RxJava2.0 学习笔记 - 常见操作符的使用&summary=Dev.liang&#39;s Blog - Android 技术分享、生活记录&pics=https://leaderliang.coding.me/img/avatar.jpeg&url=https://leaderliang.coding.me/32d4.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
        <a class="post_share-link" href="https://telegram.me/share/url?url=https://leaderliang.coding.me/32d4.html&text=RxJava2.0 学习笔记 - 常见操作符的使用" target="_blank">
            <li class="mdl-menu__item">
                分享到 Telegram
            </li>
        </a>
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h1 id="RxJava2-0-操作符"><a href="#RxJava2-0-操作符" class="headerlink" title="RxJava2.0 操作符"></a>RxJava2.0 操作符</h1><p>本文并非原创，通过各位博主博客学习后总结而得，以方便自己学习，在此感谢各位前辈，并在下面注明出处。</p>
<h2 id="操作符目录"><a href="#操作符目录" class="headerlink" title="操作符目录"></a>操作符目录</h2><ul>
<li><a href="#map"><code>map</code></a></li>
<li><a href="#flatMap"><code>flatMap</code></a></li>
<li><a href="#concatMap"><code>concatMap</code></a></li>
<li><a href="#zip"><code>zip</code></a></li>
<li><a href="#说明"><code>说明</code></a></li>
</ul>
<h2 id="map"><a href="#map" class="headerlink" title="map"></a>map</h2><p>map 是 RxJava 中最简单的一个变换操作符, 它的作用就是对上游发送的每一个事件应用一个函数, 使得每一个事件都按照指定的函数去变化。用下面图表示：</p>
<p><img src="./img/blog/rxjava/map.png" alt="map"></p>
<p>图中 map 中的函数作用是将圆形事件转换为矩形事件, 从而导致下游接收到的事件就变为了矩形。用代码来表示为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;String&gt; emitter) throws Exception &#123;</span><br><span class="line">        emitter.onNext(&quot;234&quot;);</span><br><span class="line">        emitter.onNext(&quot;678&quot;);</span><br><span class="line">        emitter.onNext(&quot;456&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).map(new Function&lt;String, Float&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public Float apply(String string) throws Exception &#123;</span><br><span class="line">        return Float.valueOf(string);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribe(new Consumer&lt;Float&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void accept(Float aFloat) throws Exception &#123;</span><br><span class="line">        mRxOperatorsText.append(&quot;accept : &quot; + aFloat + &quot;\n&quot;);</span><br><span class="line">        Log.e(TAG, &quot;accept : &quot; + aFloat + &quot;\n&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在上游我们发送的是 String 类型, 而在下游我们接收的是 Float 类型, 中间起转换作用的就是 map 操作符, 运行结果为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E/RxUsage: accept : 234.0</span><br><span class="line">E/RxUsage: accept : 678.0</span><br><span class="line">E/RxUsage: accept : 456.0</span><br></pre></td></tr></table></figure>
<p>通过 map, 可以将上游发来的事件转换为任意的类型, 可以是一个Object, 也可以是一个集合。</p>
<h2 id="flatMap"><a href="#flatMap" class="headerlink" title="flatMap"></a>flatMap</h2><p><code>flatMap</code> 将一个发送事件的上游 Observable 变换为多个发送事件的 Observables，然后将它们发射的事件合并后放进一个单独的 Observable 里。</p>
<blockquote>
<p>但有个需要注意的是，flatMap 并不能保证事件的顺序，如果需要保证顺序，需要用到下面提到的 ConcatMap。</p>
</blockquote>
<p><img src="./img/blog/rxjava/flatMap.png" alt="flatMap.png"></p>
<p>中间flatMap的作用是将圆形的事件转换为一个发送矩形事件和三角形事件的新的上游Observable.</p>
<p>看看分解动作：</p>
<p><img src="./img/blog/rxjava/flatMap_.png" alt="flatMap.png"></p>
<p>上游每发送一个事件，flatMap 都将创建一个新的水管, 然后发送转换之后的新的事件，下游接收到的就是这些新的水管发送的数据。这里需要注意的是，flatMap 并不保证事件的顺序，也就是图中所看到的，并不是事件 1 就固定在事件 2 的前面。如果需要保证顺序则需要使用 concatMap。</p>
<p>代码实现：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</span><br><span class="line">        emitter.onNext(1);</span><br><span class="line">        emitter.onNext(2);</span><br><span class="line">        emitter.onNext(3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).flatMap(new Function&lt;Integer, ObservableSource&lt;String&gt;&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource&lt;String&gt; apply(Integer integer) throws Exception &#123;</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">            list.add(&quot;I am value &quot; + integer);</span><br><span class="line">        &#125;</span><br><span class="line">        int delayTime = (int) (1 + Math.random() * 10);</span><br><span class="line">        return Observable.fromIterable(list).delay(delayTime, TimeUnit.MILLISECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribeOn(Schedulers.newThread())</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(new Consumer&lt;String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(String s) throws Exception &#123;</span><br><span class="line">                // 这个打印出来是不完整的，偶尔会丢失数据！！！</span><br><span class="line">                // 有人说 Android8.0和Android9.0 兼容性有问题了，使用 flatmap，下游无法接收到全部的消息</span><br><span class="line">                // 还未验证 ！！！</span><br><span class="line">                Log.e(TAG, &quot;flatMap : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line"></span><br><span class="line">                //这个打印出来是完整的，下游不会丢失数据</span><br><span class="line">                mRxOperatorsText.append(&quot;stringBuffer flatMap : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">                Log.e(TAG, mRxOperatorsText.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p>多次打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">E/RxUsage: flatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 2</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">E/RxUsage: flatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: flatMap : accept : I am value 3</span><br></pre></td></tr></table></figure>

<p>看了很多博客，显示的结果 1-3 都是完整循环多次后打印出来的，如这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">D/TAG: I am value 1</span><br><span class="line">D/TAG: I am value 1</span><br><span class="line">D/TAG: I am value 1</span><br><span class="line">D/TAG: I am value 3</span><br><span class="line">D/TAG: I am value 3</span><br><span class="line">D/TAG: I am value 3</span><br><span class="line">D/TAG: I am value 2</span><br><span class="line">D/TAG: I am value 2</span><br><span class="line">D/TAG: I am value 2</span><br></pre></td></tr></table></figure>

<p>不过当使用 StringBuffer append 后结果是正常的，详细可查看代码 <a href="https://github.com/leaderliang/RxJavaProject/blob/150273c7a6697bd8c08be8bacb24027397bd9336/app/src/main/java/com/android/rxjavaproject/RxUsage.java" target="_blank" rel="noopener">RxUsage/testFlatMap</a> 有网友评论说是和手机版本有关系，还待验证…，回头验证一下！！！？？？ </p>
<h3 id="flatMap-在项目中的实践"><a href="#flatMap-在项目中的实践" class="headerlink" title="flatMap 在项目中的实践"></a>flatMap 在项目中的实践</h3><p>主要用于解决 <code>嵌套请求</code> 问题。</p>
<p>举一个是实际的例子，如果是一个新用户, 必须先注册, 等注册成功之后再去自动登录；这是一个嵌套的网络请求, 首先需要去请求注册, 待注册成功回调了再去请求登录的接口。</p>
<p>接口：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface Api &#123;</span><br><span class="line">    @GET</span><br><span class="line">    Observable&lt;LoginResponse&gt; login(@Body LoginRequest request);</span><br><span class="line"></span><br><span class="line">    @GET</span><br><span class="line">    Observable&lt;RegisterResponse&gt; register(@Body RegisterRequest request);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以看到登录和注册返回的都是一个上游 Observable, 而 flatMap 操作符的作用就是把一个 Observable 转换为另一个 Observable。</p>
<p>链式代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">api.register(new RegisterRequest())            //发起注册请求</span><br><span class="line">        .subscribeOn(Schedulers.io())               //在IO线程进行网络请求</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())  //回到主线程去处理请求注册结果</span><br><span class="line">        .doOnNext(new Consumer&lt;RegisterResponse&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(RegisterResponse registerResponse) throws Exception &#123;</span><br><span class="line">                /*先根据注册的响应结果去做一些操作*/</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .observeOn(Schedulers.io())                 //回到IO线程去发起登录请求</span><br><span class="line">        .flatMap(new Function&lt;RegisterResponse, ObservableSource&lt;LoginResponse&gt;&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public ObservableSource&lt;LoginResponse&gt; apply(RegisterResponse registerResponse) throws Exception &#123;</span><br><span class="line">                return api.login(new LoginRequest());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())  //回到主线程去处理请求登录的结果</span><br><span class="line">        .subscribe(new Consumer&lt;LoginResponse&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(LoginResponse loginResponse) throws Exception &#123;</span><br><span class="line">                Toast.makeText(MainActivity.this, &quot;登录成功&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, new Consumer&lt;Throwable&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Throwable throwable) throws Exception &#123;</span><br><span class="line">                Toast.makeText(MainActivity.this, &quot;登录失败&quot;, Toast.LENGTH_SHORT).show();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<p>再次补充：</p>
<blockquote>
<p><code>subscribeOn()</code> 指定的是上游发送事件的线程;<br><code>observeOn()</code> 指定的是下游接收事件的线程;<br>多次指定 <code>上游</code> 的线程只有第一次指定的有效, 也就是说多次调用 subscribeOn() 只有<code>第一次的有效</code>, 其余的会被忽略；<br>多次指定 <code>下游</code> 的线程是可以的, 也就是说每调用一次 observeOn() , <code>下游的线程就会切换一次</code>。</p>
</blockquote>
<h2 id="concatMap"><a href="#concatMap" class="headerlink" title="concatMap"></a>concatMap</h2><p>它和 flatMap 的作用几乎一模一样, 只是它的结果是严格按照上游发送的顺序来发送的, 代码如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(@NonNull ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">        e.onNext(1);</span><br><span class="line">        e.onNext(2);</span><br><span class="line">        e.onNext(3);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).concatMap(new Function&lt;Integer, ObservableSource&lt;String&gt;&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public ObservableSource&lt;String&gt; apply(@NonNull Integer integer) throws Exception &#123;</span><br><span class="line">        List&lt;String&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">        for (int i = 0; i &lt; 3; i++) &#123;</span><br><span class="line">            list.add(&quot;I am value &quot; + integer);</span><br><span class="line">        &#125;</span><br><span class="line">        int delayTime = (int) (1 + Math.random() * 10);</span><br><span class="line">        return Observable.fromIterable(list).delay(delayTime, TimeUnit.MILLISECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribeOn(Schedulers.newThread())</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(new Consumer&lt;String&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(@NonNull String s) throws Exception &#123;</span><br><span class="line">                Log.e(TAG, &quot;concatMap : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;concatMap : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, new Consumer&lt;Throwable&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Throwable throwable) throws Exception &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">E/RxUsage: concatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: concatMap : accept : I am value 1</span><br><span class="line">E/RxUsage: concatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: concatMap : accept : I am value 2</span><br><span class="line">E/RxUsage: concatMap : accept : I am value 3</span><br><span class="line">E/RxUsage: concatMap : accept : I am value 3</span><br></pre></td></tr></table></figure>

<p>结果是有序的，但是没有打印循环三次的结果？？？需要再查一下原因，更新到博客里。</p>
<h2 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h2><p>zip 通过一个函数将多个 Observable 发送的事件结合到一起，然后发送这些组合到一起的事件。<br>它按照严格的顺序应用这个函数。<br>它只发射与发射数据项最少的那个 Observable 一样多的数据。</p>
<p><img src="./img/blog/rxjava/zip.png" alt="map"></p>
<p>从这个图中可以看见, 这次上游和以往不同的是, 有两根水管啦。<br>其中一根水管负责发送圆形事件, 另外一根水管负责发送三角形事件, 通过 zip 操作符, 使得圆形事件和三角形事件合并为了一个矩形事件。</p>
<p>分解动作：</p>
<p><img src="./img/blog/rxjava/zip_.png" alt="map"></p>
<p>分解动作解析：<br>组合的过程是分别从 两根水管里各取出一个事件 来进行组合, 并且一个事件只能被使用一次, 组合的顺序是严格按照事件发送的顺利 来进行的, 也就是说不会出现圆形 1 事件和三角形 B 事件进行合并, 也不可能出现圆形 2 和三角形 A 进行合并的情况。</p>
<p>最终下游收到的事件数量<code>是和上游中发送事件最少的那一根水管的事件数量</code>相同。这个也很好理解, 因为是从每一根水管里<code>取一个事件来进行合并</code>, 最少的那个肯定就<code>最先取完</code>, 这个时候其他的水管尽管还有事件 , 但是已经没有足够的事件来组合了, 因此下游就不会收到剩余的事件了。</p>
<p>代码演示下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">    * zip 组合事件的过程就是分别从发射器 A 和发射器 B 各取出一个事件来组合，并且一个事件只能被使用一次，</span><br><span class="line">    * 组合的顺序是严格按照事件发送的顺序来进行的，所以上面截图中，可以看到，1 永远是和 A 结合的，2 永远是和 B 结合的。</span><br><span class="line">    * &lt;p&gt;</span><br><span class="line">    * 最终接收器收到的事件数量是和发送器发送事件最少的那个发送器的发送事件数目相同, getStringObservable()发送器发的事件数目最少.</span><br><span class="line">    */</span><br><span class="line">public static void testZip() &#123;</span><br><span class="line">    Observable.zip(getIntegerObservable(), getStringObservable(), new BiFunction&lt;Integer, String, String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public String apply(@NonNull Integer integer, @NonNull String s) throws Exception &#123;</span><br><span class="line">            Log.e(TAG, &quot;s + integer : &quot; + s + integer + &quot;\n&quot;);</span><br><span class="line">            return s + integer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(new Consumer&lt;String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void accept(@NonNull String s) throws Exception &#123;</span><br><span class="line">            mRxOperatorsText.append(&quot;zip : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">            Log.e(TAG, &quot;zip : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static Observable&lt;String&gt; getStringObservable() &#123;</span><br><span class="line">    return Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void subscribe(@NonNull ObservableEmitter&lt;String&gt; e) throws Exception &#123;</span><br><span class="line">            if (!e.isDisposed()) &#123;</span><br><span class="line">                e.onNext(&quot;A&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : A \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : A \n&quot;);</span><br><span class="line">                e.onNext(&quot;B&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : B \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : B \n&quot;);</span><br><span class="line">                e.onNext(&quot;C&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : C \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : C \n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static Observable&lt;Integer&gt; getIntegerObservable() &#123;</span><br><span class="line">    return Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void subscribe(@NonNull ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">            if (!e.isDisposed()) &#123;</span><br><span class="line">                e.onNext(1);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 1 \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 1 \n&quot;);</span><br><span class="line">                e.onNext(2);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 2 \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 2 \n&quot;);</span><br><span class="line">                e.onNext(3);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 3 \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 3 \n&quot;);</span><br><span class="line">                e.onNext(4);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 4 \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 4 \n&quot;);</span><br><span class="line">                e.onNext(5);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 5 \n&quot;);</span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 5 \n&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>运行结果，log 日志：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">E/RxUsage: getIntegerObservable --&gt; Integer emit : 1 </span><br><span class="line">E/RxUsage: getIntegerObservable --&gt; Integer emit : 2 </span><br><span class="line">E/RxUsage: getIntegerObservable --&gt; Integer emit : 3 </span><br><span class="line">E/RxUsage: getIntegerObservable --&gt; Integer emit : 4 </span><br><span class="line">E/RxUsage: getIntegerObservable --&gt; Integer emit : 5 </span><br><span class="line">E/RxUsage: s + integer : A1</span><br><span class="line">E/RxUsage: zip : accept : A1</span><br><span class="line">E/RxUsage: getStringObservable --&gt; String emit : A </span><br><span class="line">E/RxUsage: s + integer : B2</span><br><span class="line">E/RxUsage: zip : accept : B2</span><br><span class="line">E/RxUsage: getStringObservable --&gt; String emit : B </span><br><span class="line">E/RxUsage: s + integer : C3</span><br><span class="line">E/RxUsage: zip : accept : C3</span><br><span class="line">E/RxUsage: getStringObservable --&gt; String emit : C</span><br></pre></td></tr></table></figure>

<p>一开始看到这个日志，我自己也有很多疑问，比如为什么感觉是水管一（getIntegerObservable） 发送完了之后, 水管二（getStringObservable）才开始发送呢？？</p>
<p>因为我们两根水管都是运行在同一个线程里, 同一个线程里执行代码肯定有先后顺序的。因此我们来稍微改一下, 不让他们在同一个线程，为了效果更明显，需要添加延迟 <code>Thread.sleep(1000);</code> , 试试效果。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">public static void testZip() &#123;</span><br><span class="line">    Observable.zip(getIntegerObservable(), getStringObservable(), new BiFunction&lt;Integer, String, String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public String apply(@NonNull Integer integer, @NonNull String s) throws Exception &#123;</span><br><span class="line">            Log.e(TAG, &quot;s + integer : &quot; + s + integer + &quot;\n&quot;);</span><br><span class="line">            return s + integer;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribe(new Consumer&lt;String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void accept(@NonNull String s) throws Exception &#123;</span><br><span class="line">            mRxOperatorsText.append(&quot;zip : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">            Log.e(TAG, &quot;zip : accept : &quot; + s + &quot;\n&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">private static Observable&lt;String&gt; getStringObservable() &#123;</span><br><span class="line">    return Observable.create(new ObservableOnSubscribe&lt;String&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void subscribe(@NonNull ObservableEmitter&lt;String&gt; e) throws Exception &#123;</span><br><span class="line">            if (!e.isDisposed()) &#123;</span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : A \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : A \n&quot;);</span><br><span class="line">                e.onNext(&quot;A&quot;);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : B \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : B \n&quot;);</span><br><span class="line">                e.onNext(&quot;B&quot;);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getStringObservable --&gt; String emit : C \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;String emit : C \n&quot;);</span><br><span class="line">                e.onNext(&quot;C&quot;);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;e getStringObservable onComplete&quot;);</span><br><span class="line">                e.onComplete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribeOn(Schedulers.io());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">private static Observable&lt;Integer&gt; getIntegerObservable() &#123;</span><br><span class="line">    return Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void subscribe(@NonNull ObservableEmitter&lt;Integer&gt; e) throws Exception &#123;</span><br><span class="line">            if (!e.isDisposed()) &#123;</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 1 \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 1 \n&quot;);</span><br><span class="line">                e.onNext(1);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 2 \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 2 \n&quot;);</span><br><span class="line">                e.onNext(2);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 3 \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 3 \n&quot;);</span><br><span class="line">                e.onNext(3);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 4 \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 4 \n&quot;);</span><br><span class="line">                e.onNext(4);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;getIntegerObservable --&gt; Integer emit : 5 \n&quot;);</span><br><span class="line">                mRxOperatorsText.append(&quot;Integer emit : 5 \n&quot;);</span><br><span class="line">                e.onNext(5);</span><br><span class="line">                Thread.sleep(1000);</span><br><span class="line"></span><br><span class="line">                Log.e(TAG, &quot;e getIntegerObservable onComplete&quot;);</span><br><span class="line">                e.onComplete();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).subscribeOn(Schedulers.io());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在展示打印结果之前，上面的操作会报下面这个异常。</p>
<p>异常打印：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">W/System.err: io.reactivex.exceptions.UndeliverableException: The exception could not be delivered to the consumer because it has already canceled/disposed the flow or the exception has nowhere to go to begin with. Further reading: https://github.com/ReactiveX/RxJava/wiki/What&apos;s-different-in-2.0#error-handling | java.lang.InterruptedException</span><br><span class="line">W/System.err:     at io.reactivex.plugins.RxJavaPlugins.onError(RxJavaPlugins.java:367)</span><br><span class="line">W/System.err:     at io.reactivex.internal.operators.observable.ObservableCreate$CreateEmitter.onError(ObservableCreate.java:73)</span><br><span class="line">W/System.err:     at io.reactivex.internal.operators.observable.ObservableCreate.subscribeActual(ObservableCreate.java:43)</span><br><span class="line">W/System.err:     at io.reactivex.Observable.subscribe(Observable.java:12267)</span><br><span class="line">W/System.err:     at io.reactivex.internal.operators.observable.ObservableSubscribeOn$SubscribeTask.run(ObservableSubscribeOn.java:96)</span><br><span class="line">W/System.err:     at io.reactivex.Scheduler$DisposeTask.run(Scheduler.java:578)</span><br><span class="line">W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.run(ScheduledRunnable.java:66)</span><br><span class="line">W/System.err:     at io.reactivex.internal.schedulers.ScheduledRunnable.call(ScheduledRunnable.java:57)</span><br><span class="line">W/System.err:     at java.util.concurrent.FutureTask.run(FutureTask.java:266)</span><br><span class="line">W/System.err:     at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:301)</span><br><span class="line">W/System.err:     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)</span><br><span class="line">W/System.err:     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)</span><br><span class="line">W/System.err:     at java.lang.Thread.run(Thread.java:764)</span><br><span class="line">W/System.err: Caused by: java.lang.InterruptedException</span><br><span class="line">W/System.err:     at java.lang.Thread.sleep(Native Method)</span><br><span class="line">W/System.err:     at java.lang.Thread.sleep(Thread.java:373)</span><br><span class="line">W/System.err:     at java.lang.Thread.sleep(Thread.java:314)</span><br><span class="line">W/System.err:     at com.android.rxjavaproject.RxUsage$28.subscribe(RxUsage.java:458)</span><br><span class="line">W/System.err:     at io.reactivex.internal.operators.observable.ObservableCreate.subscribeActual(ObservableCreate.java:40)</span><br><span class="line">W/System.err: 	... 10 more</span><br></pre></td></tr></table></figure>

<p>解决方法是把 <code>Thread.sleep()</code> 替换为 <code>SystemClock.sleep()</code>，下面展示打印结果。</p>
<p>修改后的 gif 打印：(gif 更新与 2019 年…)</p>
<p><img src="./img/blog/rxjava/zip_sleep.gif" alt="zip"></p>
<p>使用 Thread.sleep() 时候，可能细心点的朋友又看出端倪了, getIntegerObservable 这个水管明明发送了五条个数据 + 一个 Complete, 之前不加 Thread.sleep() 明明还有的, 为啥到这里没了呢?</p>
<p>这是因为 zip 发送的事件数量跟上游中发送事件最少的那一根水管的事件数量是有关的, 在这个例子里我们getStringObservable 这根水管只发送了三个事件然后就发送了Complete, 这个时候尽管另外一根水管还有事件4、5 onComplete 没有发送, 但是它们发不发送还有什么意义呢?下游的打印输出里也不会输出的！</p>
<p>另外使用 SystemClock.sleep() 的时候，getIntegerObservable 水管中的事件 4、5 和 onComplete 也都打印了，但是下游的 accept 中是不会接受的。</p>
<p>详细 demo 代码 <a href="https://github.com/leaderliang/RxJavaProject/blob/150273c7a6697bd8c08be8bacb24027397bd9336/app/src/main/java/com/android/rxjavaproject/RxUsage.java" target="_blank" rel="noopener"><code>RxUsage -&gt; testZip()</code></a></p>
<h3 id="zip-在项目实践"><a href="#zip-在项目实践" class="headerlink" title="zip 在项目实践"></a>zip 在项目实践</h3><p>场景：<br>比如一个界面需要展示用户的一些信息, 而这些信息分别要从两个服务器接口中获取, 而只有当两个都获取到了之后才能进行展示, 这个时候就可以用Zip了。</p>
<p>首先分别定义这两个请求接口:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public interface Api &#123;</span><br><span class="line">    @GET</span><br><span class="line">    Observable&lt;UserBaseInfoResponse&gt; getUserBaseInfo(@Body UserBaseInfoRequest request);</span><br><span class="line"></span><br><span class="line">    @GET</span><br><span class="line">    Observable&lt;UserExtraInfoResponse&gt; getUserExtraInfo(@Body UserExtraInfoRequest request);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接着用Zip来打包请求:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Observable&lt;UserBaseInfoResponse&gt; observable1 = api.getUserBaseInfo(new UserBaseInfoRequest())</span><br><span class="line">        .subscribeOn(Schedulers.io());</span><br><span class="line"></span><br><span class="line">Observable&lt;UserExtraInfoResponse&gt; observable2 = api.getUserExtraInfo(new UserExtraInfoRequest())</span><br><span class="line">        .subscribeOn(Schedulers.io());</span><br><span class="line"></span><br><span class="line">Observable.zip(observable1, observable2, new BiFunction&lt;UserBaseInfoResponse, UserExtraInfoResponse, UserInfo&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public UserInfo apply(UserBaseInfoResponse baseInfo,</span><br><span class="line">                            UserExtraInfoResponse extraInfo) throws Exception &#123;</span><br><span class="line">        return new UserInfo(baseInfo, extraInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(new Consumer&lt;UserInfo&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(UserInfo userInfo) throws Exception &#123;</span><br><span class="line">                //do something;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<h2 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h2><p>在这段代码中增加了一个filter,过滤一些条件，只允许被过滤后的事件通过<br>举栗：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</span><br><span class="line">        for (int i = 0; ; i++) &#123;</span><br><span class="line">            emitter.onNext(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribeOn(Schedulers.io())</span><br><span class="line">        .filter(new Predicate&lt;Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public boolean test(Integer integer) throws Exception &#123;</span><br><span class="line">                return integer % 10 == 0;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(new Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">                Log.d(TAG, &quot;&quot; + integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
<p>在这段代码中我们增加了一个 filter, 只允许能被 10 整除的事件通过。</p>
<h2 id="sample-操作符"><a href="#sample-操作符" class="headerlink" title="sample 操作符"></a>sample 操作符</h2><p>sample 操作符, 这个操作符每隔指定的时间就从上游中取出一个事件发送给下游。<br>下面代码每隔 2 秒取一个事件给下游：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Observable.create(new ObservableOnSubscribe&lt;Integer&gt;() &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void subscribe(ObservableEmitter&lt;Integer&gt; emitter) throws Exception &#123;</span><br><span class="line">        for (int i = 0; ; i++) &#123;</span><br><span class="line">            emitter.onNext(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).subscribeOn(Schedulers.io())</span><br><span class="line">        /*sample取样*/</span><br><span class="line">        .sample(2, TimeUnit.SECONDS)  </span><br><span class="line">        .observeOn(AndroidSchedulers.mainThread())</span><br><span class="line">        .subscribe(new Consumer&lt;Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Integer integer) throws Exception &#123;</span><br><span class="line">                Log.d(TAG, &quot;&quot; + integer);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>



























<h2 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h2><p>本文并非原创，通过各位博主博客学习后总结而得，以方便自己学习，在此感谢各位前辈，并在下面注明出处。</p>
<ul>
<li><a href="https://www.jianshu.com/u/c50b715ccaeb" target="_blank" rel="noopener">https://www.jianshu.com/u/c50b715ccaeb</a></li>
<li><a href="https://www.jianshu.com/p/a93c79e9f689" target="_blank" rel="noopener">https://www.jianshu.com/p/a93c79e9f689</a></li>
</ul>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 Gitalk -->
<div id="gitalk-comment">
    <!-- Gitalk 评论框 -->
<div id="gitalk-container"></div>

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<script>
    var gitalk = new Gitalk({
            clientID: 'f001049beca27f93b7ec',
            clientSecret: 'ff35fc6bcf78d776368077ae1f8c5333a13f4bd0',
            repo: 'leaderliang.github.io',
            owner: 'leaderliang',
            admin: ['leaderliang'],
            // facebook-like distraction free mode
            distractionFreeMode: false
        })
   gitalk.render('gitalk-container')
</script>
</div>
<style>
    #gitalk-comment {
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/43e5.html" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/10cc.html" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.jpeg" alt="dev.liang's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        dev.liang@outlook.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto:dev.liang@outlook.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/01/">一月 2020<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/08/">八月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/07/">七月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/06/">六月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">五月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/02/">二月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/04/">四月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/03/">三月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/12/">十二月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/03/">三月 2017<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/android/">Android<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/java/">Java<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/Kotlin/">Kotlin<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/XiaoMi/">XiaoMi<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/android/customize-view/">自定义 View<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/git/">Git<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/hexo/">Hexo<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/java/">Java<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/react-native/">React Native<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/rxjava/">RxJava<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/tools/">Tools<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/benefit-share/">benefit-share<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/wechat/">微信小程序<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/theory/">理论基础<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/manage-money/">理财<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/video/">视频推荐<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/categories/design-patterns/">设计模式<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/interview/">面试<span class="sidebar_archives-count">2</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">cloud</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="Timeline">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                Timeline
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
    
        <li>
            <a href="/leave-a-message" title="给我留言">
                
                    <i class="material-icons sidebar-material-icons">email</i>
                
                给我留言
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="https://github.com/leaderliang" target="_blank" rel="noopener" title="GitHub">
                
                GitHub
            </a>
        </li>
        
    
        <li>
            <a href="/1829.html" title="VPN 翻墙">
                
                VPN 翻墙
            </a>
        </li>
        
    
        <li>
            <a href="" title="最近访客">
                
                最近访客
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">35</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    
        <a href="https://weibo.com/2653833512" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-weibo">
                <span class="visuallyhidden">Weibo</span>
            </button><!--
     --></a>
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    
        <a href="https://github.com/leaderliang" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-github">
                <span class="visuallyhidden">Github</span>
            </button><!--
     --></a>
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    

    <!-- V2EX -->
    

    <!-- Segmentfault -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©&nbsp;<span year></span>&nbsp;Dev.liang's Blog
            

            <!--  不蒜子 统计访问量 -->
            <div>
                <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
                <div>
                    <!-- 算法a：pv的方式，单个用户连续点击n篇文章，记录n次访问量 -->
                    总阅读次数&nbsp;<span id="busuanzi_value_site_pv"></span>&nbsp;次&nbsp;
                    <span class="post-meta-divider">|</span>
                    <!-- 算法b：uv的方式，单个用户连续点击n篇文章，只记录1次访客数 -->
                    &nbsp;您是第&nbsp;<span id="busuanzi_value_site_uv"></span>&nbsp;个到来的小伙伴
                </div>
            </div>

 
        </div>

   
        

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <p>
                Hosted by <a href="https://pages.coding.me" target="_blank" rel="noopener" style="font-weight: bold">Coding Pages</a>
            </p>
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    

    <!-- baidu 站长站长配置 自动推送 -->
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
            }
            else {
                bp.src = 'https://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?NO+c6mZDGYWZMpqy5qB3yA==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?x1uB3XKBvDVAt1USvsGG8A==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#DC143C'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #DC143C, 0 0 15px #DC143C'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#DC143C',
        'border-left-color': '#DC143C'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('232tUzVxCgAj7vWMAvwzdX1d-gzGzoHsz', 'uIX1x31R4d6jXqcvcFGUQsE1');
    </script>
    <script type="text/ls-javascript" id="leancloud-views-script">
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>




    <!-- Busuanzi -->
    <script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



   <!-- GitTalk -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->

<script type="text/ls-javascript" id="Bing-Background-script">
    queue.offer(function(){
        $('body').attr('data-original', 'https://api.i-meto.com/bing?color= :black, blue, brown, green, multi, orange, pink, purple, red, white, yellow type= :C,N,S,T,A');
    });
</script>


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    var copyrightNow = new Date().getFullYear();
    var textContent = document.querySelector('span[year]')

    copyrightSince = 0000;
    if (copyrightSince === copyrightNow||copyrightSince === 0000) {
        textContent.textContent = copyrightNow
    } else {
        textContent.textContent = copyrightSince + ' - ' + copyrightNow
    }

    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.6 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>

            <!-- Code hight light  代码高亮-->
            <script src="/js/highlight.min.js" type="text/javascript"></script>
            <script type="text/javascript">
                hljs.initHighlightingOnLoad();    
                $(document).ready(function() {
                  $('.code').each(function(i, block) {
                    hljs.highlightBlock(block);
                  });
                });
            </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


        </body>
    
</html>
